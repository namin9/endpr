# 테넌트 권한/사이트 설정 확장 설계안

본 문서는 멀티 테넌트 CMS에서 **Super Admin**과 **Tenant Admin** 권한 범위, 그리고 “사이트 설정” 기능을 구체화해 향후 개발을 위한 기준을 제공한다. 기존 원칙(테마 프리셋/토큰 기반, 카테고리/메뉴 설정 기반)을 유지하면서 운영 편의성을 높이는 것을 목표로 한다.

## 1) 권한 원칙 요약

### 1.1 Super Admin (전체 테넌트 풀 권한)
- 모든 테넌트에 대한 전체 접근 권한.
- 테넌트 생성/프로비저닝/빌드 토큰 회전/Pages 연결 등 시스템 레벨 권한 보유.
- 테넌트 운영 장애 발생 시 대행 접근 가능.

### 1.2 Tenant Admin (자기 테넌트 내 풀 권한)
- 본인 테넌트 범위 내에서만 모든 운영 기능 접근.
- 콘텐츠/카테고리/메뉴/SEO/팝업/배너/추천 섹션 등 “운영 설정” 가능.
- 타 테넌트 접근 불가.

### 1.3 Editor (콘텐츠 편집자)
- 글 작성/수정/발행 요청/미리보기 중심 권한.
- 사이트 설정 영역 접근 불가(권장).

## 2) 사이트 설정(테넌트 Admin) 기능 세부

사이트 설정은 **운영자가 당장 쓰고 싶어 하는 기능**을 중심으로 묶는다. 목적은 “사이트 설정이 빈약하다”는 인상을 해소하고, 테마/레이아웃은 유지한 채 **운영 유연성**을 높이는 것이다.

### 2.1 카테고리/메뉴 관리
- 카테고리 생성/삭제/정렬/노출 on/off.
- 메뉴 탭에 카테고리 자동 반영 + 수동 메뉴 항목 추가 가능.
- 메뉴 항목: 내부 링크(카테고리/태그/페이지) + 외부 링크 지원.

### 2.2 추천 글/섹션 구성
- 홈 화면 추천 글 섹션 on/off.
- 추천 기준 선택:
  - 수동 픽(특정 글 고정)
  - 카테고리/태그 기반 자동 추천
  - 최신 글 상단 노출
- 섹션 순서 변경(드래그 정렬).

### 2.3 SEO/메타 설정
- 사이트 기본 메타(OG 이미지, 메타 설명, 기본 키워드).
- 카테고리별 메타 덮어쓰기(선택).
- 기본 robots 정책 설정(Preview/Share는 noindex/nofollow 고정).

### 2.4 헤더/푸터 구성
- 헤더: 메뉴 탭 추가/삭제, CTA 버튼(문의/상담) 노출.
- 푸터: 링크 그룹(회사소개/채용/문의/이용약관) 관리.
- 외부 링크 허용 여부 옵션(화이트리스트).

### 2.5 팝업/공지/배너
- 팝업 유형: 모달/상단바/하단바/사이드바.
- 노출 조건:
  - 기간(시작/종료)
  - 숨김 옵션: 24시간/7일
  - 경로별 노출(홈/전체/카테고리별)
- 배너 슬롯: 상단/하단/사이드 영역에 이미지+링크 배치.

### 2.6 챗봇/스크립트 슬롯
- 챗봇/분석 스크립트 삽입 슬롯 제공.
- 보안상 “스크립트 허용 여부”는 Super Admin에서 정책 관리.

### 2.7 기본 브랜딩
- 로고/파비콘 업로드.
- 기본 컬러(Primary/Accent) 선택.
- 기본 폰트(프리셋 내 선택지) 변경.

## 3) 권한 매트릭스(요약)

| 기능 영역 | Super Admin | Tenant Admin | Editor |
| --- | --- | --- | --- |
| 테넌트 생성/삭제/프로비저닝 | ✅ | ❌ | ❌ |
| 테마 프리셋/토큰 정책 관리 | ✅ | ❌ | ❌ |
| 카테고리/메뉴 관리 | ✅ | ✅ | ❌ |
| 추천 섹션/노출 정책 | ✅ | ✅ | ❌ |
| SEO/메타 설정 | ✅ | ✅ | ❌ |
| 팝업/배너/챗봇 설정 | ✅ | ✅ | ❌ |
| 콘텐츠 작성/수정/발행 | ✅ | ✅ | ✅ |

## 4) 운영/보안 고려사항

### 4.1 Super Admin 대행 접근 로그
- Super Admin이 특정 테넌트에 접근할 때 이유/시간/작업 내역을 로그로 남김.
- 감사 화면에서 조회 가능하도록 이벤트 기록(누가/언제/무엇을).

### 4.2 설정 변경 이력
- 사이트 설정 변경은 이력 저장(누가/언제/무엇을).
- 롤백은 v2에서 검토.

### 4.3 스크립트/외부 링크 제한
- 스크립트 삽입은 보안 리스크가 높으므로 정책으로 제한.
- 외부 링크/스크립트 허용 여부는 Super Admin 정책에서 통제.

## 5) 구현 우선순위 제안

1. 카테고리/메뉴 관리
2. SEO/메타 기본 설정
3. 추천 글 섹션 관리
4. 헤더/푸터 링크
5. 팝업/배너 기능
6. 챗봇/스크립트 슬롯
7. 브랜딩(로고/파비콘/컬러)

## 6) 테마 제작 및 적용 원칙

사이트 설정 확장과 별개로, **테마는 반드시 함께 정의**되어야 한다. 테마는 “레이아웃 프리셋 + 토큰” 구조로 제공하며, CMS는 테넌트 설정을 통해 **프리셋 선택 + 토큰 덮어쓰기**를 지원한다.

### 6.1 테마 프리셋 구성
- Type A: 뉴스룸/포털형(고밀도, 리스트/그리드 혼합, 복합 GNB)
- Type B: 브랜드 블로그형(카드 UI, 넓은 여백, 비주얼 강조)
- Type C: 테크/아카이브형(1-Column 중심, 타이틀/태그 강조, 다크 모드)

### 6.2 토큰 항목 예시
- Typography: 제목/본문 폰트, 행간, 자간
- Spacing: 카드/섹션 여백, 그리드 갭
- Radius: 버튼/카드 라운딩
- Color: 배경/텍스트/포인트/CTA
- Density: 리스트 행 높이, 정보 밀도
- Mode: 라이트/다크 기본값

### 6.3 적용 흐름
1. Super Admin이 테마 프리셋/토큰 정책 정의
2. Tenant Admin이 테넌트 단위로 프리셋 선택
3. 브랜드/색상/간격 등 토큰 범위에서 덮어쓰기

## 7) 레이아웃 구조와 디자인 세부 스펙

어설픈 UI를 방지하기 위해 레이아웃 구조와 디자인 스펙을 프리셋별로 고정 정의한다. 구현 전 기존 코드와 충돌하지 않도록 **컴포넌트 슬롯과 설정 키**를 명시한다.

### 7.1 공통 레이아웃 슬롯
- Header: 로고, GNB, 유틸리티(검색/구독/문의), CTA 버튼.
- Hero: 선택적(홈에만).
- Section: 카테고리 섹션, 추천 섹션, 최신 섹션.
- Listing: 리스트/그리드 영역.
- Sidebar: 선택적(프리셋별 on/off).
- Footer: 링크 그룹 + 법적 정보 + SNS.

### 7.2 Type A (뉴스룸/포털형)
- 정보 밀도: High
- Layout: 12-column grid, 본문 8 + 사이드 4
- Listing:
  - Top: 헤드라인 1개(대형 이미지)
  - Middle: 리스트 6~12개(썸네일 소형)
  - Bottom: 카테고리별 그리드 2~3열
- Typography:
  - Title: 20~24px, Bold
  - Body: 14~16px
  - Meta: 12~13px
- GNB: 2-depth 지원
- Sidebar: 카테고리/보도자료/멀티미디어 고정 영역

### 7.3 Type B (브랜드 블로그형)
- 정보 밀도: Low
- Layout: 1-Column 또는 10-column center
- Listing:
  - 카드 UI 중심(썸네일 대형, 비율 16:9)
  - 2~3열 그리드
- Typography:
  - Title: 28~32px
  - Body: 16~18px
  - Meta: 13~14px
- Radius: 카드/버튼 둥글기 12~16px
- 여백: 섹션 간격 64~96px

### 7.4 Type C (테크/아카이브형)
- 정보 밀도: Medium
- Layout: 1-Column, 최대 폭 720~820px
- Listing:
  - 리스트 중심(썸네일 최소화)
  - 태그/카테고리 강조
- Typography:
  - Title: 22~26px
  - Body: 15~17px
  - Meta: 12~13px
- Dark Mode: 기본 지원 필수

## 8) 디자인 토큰 확장 규칙

토큰은 프리셋 기반 디자인을 깨지 않도록 **허용 범위**를 명확히 한다.

### 8.1 토큰 범위 예시
- Font Scale: Title/Body/Meta 크기 ±2px 이내
- Radius: 0~16px 범위
- Spacing: 기본값 대비 ±20% 이내
- Color: 브랜드 컬러/강조 컬러만 변경

### 8.2 토큰 변경 제한
- 레이아웃 구조(컬럼 수/사이드바 유무)는 프리셋 고정.
- 가독성을 해치는 대비(AA 기준 미달)는 제한.

## 9) 기존 코드 충돌 예방 체크리스트

기존 구현과 충돌을 방지하기 위해 사전 점검을 수행한다.

### 9.1 컴포넌트 명명 충돌
- 공통 컴포넌트 네이밍을 확정(header, listing, card, meta, tag).
- 프리셋별 변형은 modifier 클래스 또는 variant prop으로 처리.

### 9.2 데이터 모델 충돌
- 카테고리/메뉴는 DB 기반 렌더링 원칙 유지.
- 추천 섹션, 팝업, 배너는 새로운 테이블 또는 설정 JSON에 저장.

### 9.3 테마 토큰 저장 위치
- 테넌트 설정 테이블에 저장.
- 빌드 시 Worker가 테넌트 토큰을 주입.

### 9.4 SEO/메타 충돌
- 기본 메타는 테넌트 설정에서 제공.
- 프리셋은 메타 구조(OG, canonical, robots)를 고정 템플릿으로 유지.
